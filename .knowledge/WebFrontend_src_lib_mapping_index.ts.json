{"is_source_file": true, "format": "TypeScript", "description": "This file provides functions and type definitions for parsing resource and cost ingestions files in CSV or XLSX format, including validation for required fields.", "external_files": ["papaparse", "xlsx"], "external_methods": ["Papa.parse", "XLSX.read", "XLSX.utils.sheet_to_json"], "published": ["parseResourceFile", "parseCostFile", "ParseError", "ParseResult", "ResourceIngestRow", "CostIngestRow"], "classes": [], "methods": [{"name": "export async function parseResourceFile(file: File): Promise<ParseResult<ResourceIngestRow>> { parseResourceFile", "description": "Parses a resource ingest file (.csv/.xlsx), validates required fields, and categorizes rows as valid or invalid.", "scope": "", "scopeKind": ""}, {"name": "export async function parseCostFile(file: File): Promise<ParseResult<CostIngestRow>> { parseCostFile", "description": "Parses a cost ingest file (.csv/.xlsx), validates required fields, and categorizes rows as valid or invalid.", "scope": "", "scopeKind": ""}, {"name": "function normalizeHeader(h: string): string { normalizeHeader", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function parseCsv(file: File): Promise<Record<string, unknown>[]> { parseCsv", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function parseFileGeneric(file: File): Promise<Record<string, unknown>[]> { parseFileGeneric", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function parseXlsx(file: File): Promise<Record<string, unknown>[]> { parseXlsx", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function validateBasic(row: Record<string, unknown>, required: string[], rowNumber: number): Par/ validateBasic", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["parseCsv", "parseXlsx", "parseFileGeneric", "validateBasic"], "search-terms": ["ResourceIngestRow", "CostIngestRow", "parseCsv", "parseXlsx", "parseResourceFile", "parseCostFile", "Papa", "XLSX"], "state": 2, "file_id": 77, "knowledge_revision": 267, "git_revision": "", "revision_history": [{"263": ""}, {"267": ""}], "ctags": [{"_type": "tag", "name": "CostIngestRow", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export type CostIngestRow = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "PapaParseError", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "PapaParseResult", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ParseConfig", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ParseError", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export type ParseError = { rowNumber: number; errors: string[] };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ParseError", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ParseResult", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export type ParseResult<T> = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ParseResult", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ResourceIngestRow", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export type ResourceIngestRow = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "as", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^import Papa, { type ParseResult as PapaParseResult, type ParseError as PapaParseError, type Pars/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "buf", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const buf = await file.arrayBuffer();$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const config = {$/", "language": "TypeScript", "kind": "constant", "scope": "parseCsv", "scopeKind": "function"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const err = validateBasic(row, ['provider', 'cost_date'], rowNumber);$/", "language": "TypeScript", "kind": "constant", "scope": "parseCostFile", "scopeKind": "function"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const err = validateBasic(row, ['resource_id', 'provider', 'region', 'state'], rowNumber);$/", "language": "TypeScript", "kind": "constant", "scope": "parseResourceFile", "scopeKind": "function"}, {"_type": "tag", "name": "errs", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const errs: string[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "validateBasic", "scopeKind": "function"}, {"_type": "tag", "name": "first", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const first = wb.SheetNames[0];$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "first", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const ws = wb.Sheets[first];$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "invalidRows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const invalidRows: ParseError[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "parseCostFile", "scopeKind": "function"}, {"_type": "tag", "name": "invalidRows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const invalidRows: ParseError[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "parseResourceFile", "scopeKind": "function"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const json = XLSX.utils.sheet_to_json<Record<string, unknown>>(ws, { defval: '' });$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const v = row[k];$/", "language": "TypeScript", "kind": "constant", "scope": "validateBasic", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const name = file.name.toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "parseFileGeneric", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeHeader", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^function normalizeHeader(h: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "out", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const out: Record<string, unknown> = {};$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "parseCostFile", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export async function parseCostFile(file: File): Promise<ParseResult<CostIngestRow>> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parseCsv", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^async function parseCsv(file: File): Promise<Record<string, unknown>[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parseFileGeneric", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^async function parseFileGeneric(file: File): Promise<Record<string, unknown>[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parseResourceFile", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^export async function parseResourceFile(file: File): Promise<ParseResult<ResourceIngestRow>> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parseXlsx", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^async function parseXlsx(file: File): Promise<Record<string, unknown>[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "rowNumber", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const rowNumber = idx + 2; \\/\\/ account for header row in typical spreadsheets$/", "language": "TypeScript", "kind": "constant", "scope": "parseResourceFile", "scopeKind": "function"}, {"_type": "tag", "name": "rowNumber", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const rowNumber = idx + 2;$/", "language": "TypeScript", "kind": "constant", "scope": "parseCostFile", "scopeKind": "function"}, {"_type": "tag", "name": "rows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const rows = await parseFileGeneric(file);$/", "language": "TypeScript", "kind": "constant", "scope": "parseCostFile", "scopeKind": "function"}, {"_type": "tag", "name": "rows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const rows = await parseFileGeneric(file);$/", "language": "TypeScript", "kind": "constant", "scope": "parseResourceFile", "scopeKind": "function"}, {"_type": "tag", "name": "skipEmptyLines", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^      skipEmptyLines: 'greedy' as const,$/", "language": "TypeScript", "kind": "constant", "scope": "parseCsv", "scopeKind": "function"}, {"_type": "tag", "name": "transformHeader", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^      transformHeader: (h: string) => normalizeHeader(h),$/", "language": "TypeScript", "kind": "constant", "scope": "parseCsv", "scopeKind": "function"}, {"_type": "tag", "name": "v", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^    const v = row[k];$/", "language": "TypeScript", "kind": "constant", "scope": "validateBasic", "scopeKind": "function"}, {"_type": "tag", "name": "validRows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const validRows: CostIngestRow[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "parseCostFile", "scopeKind": "function"}, {"_type": "tag", "name": "validRows", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const validRows: ResourceIngestRow[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "parseResourceFile", "scopeKind": "function"}, {"_type": "tag", "name": "validateBasic", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^function validateBasic(row: Record<string, unknown>, required: string[], rowNumber: number): Par/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wb", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const wb = XLSX.read(buf, { type: 'array' });$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}, {"_type": "tag", "name": "ws", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/mapping/index.ts", "pattern": "/^  const ws = wb.Sheets[first];$/", "language": "TypeScript", "kind": "constant", "scope": "parseXlsx", "scopeKind": "function"}], "hash": "472b9660e54f55990cbf45f5d8a380f4", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/mapping/index.ts"}