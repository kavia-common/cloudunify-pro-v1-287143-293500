{"is_source_file": true, "format": "TypeScript", "description": "This file is a TypeScript module defining an HTTP client utility with functions for configuring API base URL, authentication tokens, and making HTTP requests with automatic token refresh handling.", "external_files": ["fetch API (built-in browser API)"], "external_methods": ["fetch"], "published": ["getApiBaseUrl", "configureAuth", "httpRequest"], "classes": [], "methods": [{"name": "export function getApiBaseUrl(): string { getApiBaseUrl", "description": "Returns the configured API base URL from environment variables.", "scope": "", "scopeKind": ""}, {"name": "export function configureAuth(params: { configureAuth", "description": "Configures authentication handlers including access token retrieval, token refresh, and unauthorized handler.", "scope": "", "scopeKind": ""}, {"name": "export async function httpRequest<T>( httpRequest", "description": "Performs an HTTP request with automatic handling of authorization headers and token refresh upon 401 responses.", "scope": "", "scopeKind": ""}, {"name": "async function attemptRefresh(): Promise<boolean> { attemptRefresh", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function readViteApiBase(): string { readViteApiBase", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function shouldSkipRefresh(path: string): boolean { shouldSkipRefresh", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["readViteApiBase", "attemptRefresh", "shouldSkipRefresh", "fetch"], "search-terms": ["http request", "token refresh", "API base URL", "authentication", "fetch API"], "state": 2, "file_id": 36, "knowledge_revision": 92, "git_revision": "", "revision_history": [{"83": ""}, {"92": ""}], "ctags": [{"_type": "tag", "name": "HttpMethod", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^export type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "attemptRefresh", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^async function attemptRefresh(): Promise<boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const base = (import.meta as any).env?.VITE_API_BASE as string | undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "readViteApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}, {"_type": "tag", "name": "configureAuth", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^export function configureAuth(params: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "errText", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const errText = await res.text();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getAccessToken", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^let getAccessToken: () => string | null = () => null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^export function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}, {"_type": "tag", "name": "httpRequest", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^export async function httpRequest<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const message = `API ${method} ${path} failed: ${res.status} ${res.statusText} - ${errText}`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const p = path.toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "shouldSkipRefresh", "scopeKind": "function"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const url = `${base}${path.startsWith('\\/') ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}, {"_type": "tag", "name": "readViteApiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^function readViteApiBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "refreshHandler", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^let refreshHandler: (() => Promise<boolean>) | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "refreshPromise", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^let refreshPromise: Promise<boolean> | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "refreshed", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^    const refreshed = await attemptRefresh();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}, {"_type": "tag", "name": "shouldSkipRefresh", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^function shouldSkipRefresh(path: string): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^    const text = await res.text();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const token = getAccessToken?.();$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}, {"_type": "tag", "name": "unauthorizedHandler", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^let unauthorizedHandler: (() => void) | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/http.ts", "pattern": "/^  const url = `${base}${path.startsWith('\\/') ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "httpRequest", "scopeKind": "function"}], "hash": "b2729f0b216a0b75fa070779736e7da5", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/api/http.ts", "fields": [{"name": "let getAccessToken: () => string | null = () => null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let refreshHandler: (() => Promise<boolean>) | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let refreshPromise: Promise<boolean> | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let unauthorizedHandler: (() => void) | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}