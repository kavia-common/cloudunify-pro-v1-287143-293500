{"is_source_file": true, "format": "TypeScript", "description": "This file defines a client API for interacting with the CloudUnify Pro backend. It includes functions for authentication, resource management, cost summaries, recommendations, automation rules, and WebSocket URL building. The client handles both authenticated and public (unauthenticated) requests, providing relevant error handling and fallback logic.", "external_files": ["../../types/api", "../env", "./safe", "./http"], "external_methods": ["getWsBase", "joinUrl", "tryGetApiBase", "safeGetJson", "getJson", "postJson"], "published": ["apiClient"], "classes": [], "methods": [{"name": "function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/ withQuery", "description": "Constructs a URL with query parameters from a base URL and a parameters object.", "scope": "", "scopeKind": ""}, {"name": "function mapBulkResponseToUi(resp: any): BulkUploadResponse { mapBulkResponseToUi", "description": "Maps a bulk upload response from the backend into a user-friendly format with error details.", "scope": "", "scopeKind": ""}, {"name": "export function apiClient() { apiClient", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["tryGetApiBase()", "getWsBase()", "joinUrl()", "postJson()", "getJson()", "safeGetJson()"], "search-terms": ["apiClient", "BulkUploadResponse", "resource list", "cost summary", "recommendations", "automation rules", "WebSocket URL"], "state": 2, "file_id": 59, "knowledge_revision": 238, "git_revision": "", "revision_history": [{"177": ""}, {"181": ""}, {"216": ""}, {"225": ""}, {"238": ""}], "ctags": [{"_type": "tag", "name": "PublicCallOptions", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^type PublicCallOptions = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const apiBase = tryGetApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^export function apiClient() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const errors = Array.isArray(resp?.errors) ? resp.errors : [];$/", "language": "TypeScript", "kind": "constant", "scope": "mapBulkResponseToUi", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const items = payload.rows.map((r) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "mapBulkResponseToUi", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function mapBulkResponseToUi(resp: any): BulkUploadResponse {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "missing", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^    const missing = () => {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<CostSummary>(url, { retries: 1, timeoutMs: 8000, debugKey:/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<Recommendation[]>(url, { retries: 1, timeoutMs: 8000, debu/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<ResourceListResponse>(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/costs\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/resources\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const u = new URL(baseUrl);$/", "language": "TypeScript", "kind": "constant", "scope": "withQuery", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/costs\\/summary'), { period });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/recommendations'), { priority: params.priority/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/resources'), {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "withQuery", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wsBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const wsBase = (() => {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}], "hash": "b506c7b3beb5ee9ce79203f84d630643", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/api/client.ts"}