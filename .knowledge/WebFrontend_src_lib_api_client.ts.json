{"is_source_file": true, "format": "TypeScript", "description": "This file defines a TypeScript module that implements a typed API client for interacting with a backend service. It includes functions for making authenticated HTTP requests, handling environment-based configuration, and exposing methods for login, resource listing, cost summaries, recommendations, automation rule management, and WebSocket URL generation. The code is designed for use in a frontend web application, utilizing fetch API and environment variables.", "external_files": ["../../types/api"], "external_methods": [], "published": ["createApiClient", "apiClient"], "classes": [], "methods": [{"name": "function getApiBaseUrl(): string { getApiBaseUrl", "description": "Retrieves the base URL for the API from environment variables, throwing an error if not set.", "scope": "", "scopeKind": ""}, {"name": "async function request<T>(path: string, method: HttpMethod, body?: unknown, token?: string): Pro/ request", "description": "Performs an HTTP request with the specified method, path, body, and token, returning the JSON response or throwing an error on failure.", "scope": "", "scopeKind": ""}, {"name": "export function createApiClient() { createApiClient", "description": "Factory function that creates and returns a typed API client with methods for authentication, resource management, cost summaries, recommendations, automation rules, and WebSocket URL building.", "scope": "", "scopeKind": ""}, {"name": "export function apiClient() { apiClient", "description": "Singleton accessor for the API client instance.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "new URL", "Object.entries", "request"], "search-terms": ["API client", "TypeScript API module", "environment variable VITE_API_BASE_URL", "automation rules", "recommendations", "costs", "resources", "auth login", "WebSocket URL"], "state": 2, "file_id": 33, "knowledge_revision": 70, "git_revision": "", "ctags": [{"_type": "tag", "name": "HttpMethod", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^export function apiClient() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "createApiClient", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const base = import.meta.env.VITE_API_BASE_URL as string | undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "createApiClient", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^export function createApiClient() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const headers: Record<string, string> = {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const query = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant", "scope": "createApiClient", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const query = new URLSearchParams({ period });$/", "language": "TypeScript", "kind": "constant", "scope": "createApiClient", "scopeKind": "function"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^async function request<T>(path: string, method: HttpMethod, body?: unknown, token?: string): Pro/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^    const text = await res.text();$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const u = new URL(base, window.location.origin);$/", "language": "TypeScript", "kind": "constant", "scope": "createApiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const url = `${base}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "wsProtocol", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const wsProtocol = u.protocol === 'https:' ? 'wss:' : 'ws:';$/", "language": "TypeScript", "kind": "constant", "scope": "createApiClient", "scopeKind": "function"}], "hash": "52c2d04bf5f6ea20f06a0b029ff7db09", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/api/client.ts", "revision_history": [{"70": ""}]}