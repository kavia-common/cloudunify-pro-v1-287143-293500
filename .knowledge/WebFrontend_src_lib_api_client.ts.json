{"is_source_file": true, "format": "TypeScript", "description": "This file defines an API client for the CloudUnify Pro backend, providing methods for authentication, resource management, cost summaries, recommendations, automation rules, and WebSocket URL generation. It includes utility functions for URL query handling and response mapping, with public-facing methods that handle optional authorization and error scenarios.", "external_files": ["../env", "./safe", "./http", "../../types/api"], "external_methods": ["getApiBase", "getWsBase", "joinUrl", "safeGetJson", "getJson", "postJson"], "published": ["apiClient"], "classes": [], "methods": [{"name": "function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/ withQuery", "description": "Constructs a URL with query parameters from a base URL and a parameters object.", "scope": "", "scopeKind": ""}, {"name": "function mapBulkResponseToUi(resp: any): BulkUploadResponse { mapBulkResponseToUi", "description": "Maps a bulk upload API response to a UI-friendly format, including error processing.", "scope": "", "scopeKind": ""}, {"name": "export function apiClient() { apiClient", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getApiBase", "getWsBase", "joinUrl", "getJson", "postJson", "safeGetJson"], "search-terms": ["apiClient", "bulkUpload", "CostSummary", "recommendations", "automation", "resource list", "PublicCallOptions", "mapBulkResponseToUi", "withQuery", "activity stream url"], "state": 2, "file_id": 59, "knowledge_revision": 225, "git_revision": "", "revision_history": [{"177": ""}, {"181": ""}, {"216": ""}, {"225": ""}], "ctags": [{"_type": "tag", "name": "PublicCallOptions", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^type PublicCallOptions = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const apiBase = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^export function apiClient() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const errors = Array.isArray(resp?.errors) ? resp.errors : [];$/", "language": "TypeScript", "kind": "constant", "scope": "mapBulkResponseToUi", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const items = payload.rows.map((r) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "mapBulkResponseToUi", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function mapBulkResponseToUi(resp: any): BulkUploadResponse {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<CostSummary>(url, { retries: 1, timeoutMs: 8000, debugKey:/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<Recommendation[]>(url, { retries: 1, timeoutMs: 8000, debu/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<ResourceListResponse>(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/costs\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/resources\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const u = new URL(baseUrl);$/", "language": "TypeScript", "kind": "constant", "scope": "withQuery", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/costs\\/summary'), { period });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/recommendations'), { priority: params.priority/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/resources'), {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "withQuery", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wsBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const wsBase = getWsBase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}], "hash": "ce84c3b327e3deb25ff0f7c88cf78ae9", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/api/client.ts"}