{"is_source_file": true, "format": "TypeScript", "description": "This file defines a client-side API wrapper for interacting with a backend service, including authentication, resource management, cost summaries, recommendations, automation rules, and WebSocket URL generation. It contains functions to make HTTP requests, handle responses, and provide a typed interface for frontend components.", "external_files": ["../../types/api", "../env", "./safe", "./http"], "external_methods": ["getApiBase", "getWsBase", "joinUrl", "safeGetJson", "getJson", "postJson"], "published": ["apiClient"], "classes": [], "methods": [{"name": "export function apiClient() { apiClient", "description": "Returns a typed client object that provides methods for authentication, resource listing and uploading, cost summaries, recommendations, automation rules, and WebSocket URL generation.", "scope": "", "scopeKind": ""}, {"name": "function mapBulkResponseToUi(resp: any): BulkUploadResponse { mapBulkResponseToUi", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/ withQuery", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getApiBase", "getWsBase", "joinUrl", "getJson", "postJson", "safeGetJson"], "search-terms": ["apiClient", "BulkUploadResponse", "automation-rules", "recommendations", "costs", "resources", "auth", "WebSocket"], "state": 2, "file_id": 59, "knowledge_revision": 216, "git_revision": "", "revision_history": [{"177": ""}, {"181": ""}, {"216": ""}], "ctags": [{"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const apiBase = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^export function apiClient() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const errors = Array.isArray(resp?.errors) ? resp.errors : [];$/", "language": "TypeScript", "kind": "constant", "scope": "mapBulkResponseToUi", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const items = payload.rows.map((r) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "mapBulkResponseToUi", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function mapBulkResponseToUi(resp: any): BulkUploadResponse {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<CostSummary>(url, { retries: 1, timeoutMs: 8000 });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<Recommendation[]>(url, { retries: 1, timeoutMs: 8000 });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const res = await safeGetJson<ResourceListResponse>(url, { retries: 1, timeoutMs: 8000 }/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/costs\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "resp", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const resp = await postJson<any>(joinUrl(apiBase, '\\/resources\\/bulk'), { items });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const u = new URL(baseUrl);$/", "language": "TypeScript", "kind": "constant", "scope": "withQuery", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/costs\\/summary'), { period });$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/recommendations'), { priority: params.priority/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^        const url = withQuery(joinUrl(apiBase, '\\/resources'), {$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}, {"_type": "tag", "name": "withQuery", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^function withQuery(baseUrl: string, params: Record<string, string | number | undefined>): string/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "wsBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/api/client.ts", "pattern": "/^  const wsBase = getWsBase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiClient", "scopeKind": "function"}], "hash": "58fa0565f900ab49eaace442bc965335", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/api/client.ts"}