{"is_source_file": true, "format": "TypeScript", "description": "This file provides environment helper functions for a web frontend project, specifically for managing and normalizing environment variables related to API and WebSocket URLs, including support for different environment variable prefixes based on project configurations.", "external_files": ["import.meta"], "external_methods": ["String.prototype.replace", "String.prototype.trim", "URL constructor"], "published": ["getApiBase", "getWsBase", "joinUrl"], "classes": [], "methods": [{"name": "export function getApiBase(): string { getApiBase", "description": "Returns the normalized backend API base URL, prioritizing VITE_API_BASE, then REACT_APP_API_BASE, then REACT_APP_BACKEND_URL, and throws an error if none are set.", "parameters": [], "return": "string", "scope": "", "scopeKind": ""}, {"name": "export function getWsBase(): string { getWsBase", "description": "Returns the WebSocket base URL, either from environment variables or derived from the API base URL by changing the protocol, with support for stripping trailing '/ws'.", "parameters": [], "return": "string", "scope": "", "scopeKind": ""}, {"name": "export function joinUrl(base: string, path: string): string { joinUrl", "description": "Joins a base URL and a relative path ensuring a exactly one slash separator.", "parameters": [{"name": "base", "type": "string"}, {"name": "path", "type": "string"}], "return": "string", "scope": "", "scopeKind": ""}, {"name": "function getEnv(): AnyEnv { getEnv", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function normalizeApiBase(rawBase: string): string { normalizeApiBase", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function trimTrailingSlashes(v: string): string { trimTrailingSlashes", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getEnv", "normalizeApiBase", "trimTrailingSlashes"], "search-terms": ["env helpers", "API base URL", "WebSocket URL", "VITE_*", "REACT_APP_*", "normalize", "URL", "environment variable handling"], "state": 2, "file_id": 57, "knowledge_revision": 222, "git_revision": "", "revision_history": [{"175": ""}, {"182": ""}, {"222": ""}], "ctags": [{"_type": "tag", "name": "AnyEnv", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^type AnyEnv = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const apiBase = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const b = trimTrailingSlashes(String(base || '').trim());$/", "language": "TypeScript", "kind": "constant", "scope": "joinUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const base = String(raw || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const base = trimTrailingSlashes(String(rawBase || '').trim());$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "cleaned", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^    const cleaned = trimTrailingSlashes(explicit).replace(\\/\\\\\\/ws$\\/i, '');$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "derived", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const derived = apiBase.replace(\\/^https:\\/i, 'wss:').replace(\\/^http:\\/i, 'ws:');$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const env = getEnv();$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const env = getEnv();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "explicit", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const explicit = String(raw || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function getApiBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getEnv", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^function getEnv(): AnyEnv {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getWsBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function getWsBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "joinUrl", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function joinUrl(base: string, path: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "normalizeApiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^function normalizeApiBase(rawBase: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const normalized = normalizeApiBase(base);$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const p = String(path || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "joinUrl", "scopeKind": "function"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^    const path = trimTrailingSlashes(u.pathname || '');$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const raw = (env.VITE_WS_URL as string | undefined) || (env.REACT_APP_WS_URL as string | undef/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const raw =$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "trimTrailingSlashes", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^function trimTrailingSlashes(v: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^    const u = new URL(base);$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeApiBase", "scopeKind": "function"}], "hash": "90462a53ce331aaa61bbd9492d7b0694", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/env.ts"}