{"is_source_file": true, "format": "TypeScript", "description": "This file provides environment helper functions for a web frontend, specifically for managing environment variables and constructing URLs based on the environment, with support for Vite and React legacy variables.", "external_files": [], "external_methods": ["import.meta"], "published": ["getApiBase", "getWsBase", "joinUrl"], "classes": [], "methods": [{"name": "export function getApiBase(): string { getApiBase", "description": "Returns the backend API base URL, preferring VITE_* variables over legacy REACT_APP_* variables.", "scope": "", "scopeKind": ""}, {"name": "export function getWsBase(): string { getWsBase", "description": "Returns the WebSocket base URL, derived from environment variables or by transforming the API base URL.", "scope": "", "scopeKind": ""}, {"name": "export function joinUrl(base: string, path: string): string { joinUrl", "description": "Joins a base URL and a path, ensuring exactly one slash between them.", "scope": "", "scopeKind": ""}, {"name": "function trimTrailingSlashes(v: string): string { trimTrailingSlashes", "description": "Removes trailing slashes from a URL string.", "scope": "", "scopeKind": ""}, {"name": "function getEnv(): AnyEnv { getEnv", "description": "Retrieves environment variables exposed via import.meta.env.", "scope": "", "scopeKind": ""}], "calls": ["getEnv", "trimTrailingSlashes", "getApiBase"], "search-terms": ["env", "API base URL", "WebSocket URL", "VITE_*", "REACT_APP_*", "environment variables", "URL joiner"], "state": 2, "file_id": 57, "knowledge_revision": 175, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnyEnv", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^type AnyEnv = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const apiBase = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const b = trimTrailingSlashes(String(base || '').trim());$/", "language": "TypeScript", "kind": "constant", "scope": "joinUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const base = String(raw || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "derived", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const derived = apiBase.replace(\\/^https:\\/i, 'wss:').replace(\\/^http:\\/i, 'ws:');$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const env = getEnv();$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const env = getEnv();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "explicit", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const explicit = String(raw || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function getApiBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getEnv", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^function getEnv(): AnyEnv {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getWsBase", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function getWsBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "joinUrl", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^export function joinUrl(base: string, path: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const p = String(path || '').trim();$/", "language": "TypeScript", "kind": "constant", "scope": "joinUrl", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const raw = (env.VITE_WS_URL as string | undefined) || (env.REACT_APP_WS_URL as string | undef/", "language": "TypeScript", "kind": "constant", "scope": "getWsBase", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^  const raw =$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "trimTrailingSlashes", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-v1-287143-293500/WebFrontend/src/lib/env.ts", "pattern": "/^function trimTrailingSlashes(v: string): string {$/", "language": "TypeScript", "kind": "function"}], "hash": "48bb1f97831432cd7017d0ba945751e7", "format-version": 4, "code-base-name": "WebFrontend", "filename": "WebFrontend/src/lib/env.ts", "revision_history": [{"175": ""}]}